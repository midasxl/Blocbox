Best practice for JavaScript logic